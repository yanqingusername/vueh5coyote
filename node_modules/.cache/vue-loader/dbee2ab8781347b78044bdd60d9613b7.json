{"remainingRequest":"/Users/user/coyote/vueh5coyote/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/coyote/vueh5coyote/src/pages/login/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/coyote/vueh5coyote/src/pages/login/login.vue","mtime":1648805476696},{"path":"/Users/user/coyote/vueh5coyote/node_modules/cache-loader/dist/cjs.js","mtime":1647851357606},{"path":"/Users/user/coyote/vueh5coyote/node_modules/babel-loader/lib/index.js","mtime":1647851357560},{"path":"/Users/user/coyote/vueh5coyote/node_modules/cache-loader/dist/cjs.js","mtime":1647851357606},{"path":"/Users/user/coyote/vueh5coyote/node_modules/vue-loader/lib/index.js","mtime":1647851377631}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFZlcmlmaWNhdGlvbiwgZ2V0TG9naW4gfSBmcm9tICIuLi8uLi9yZXF1ZXN0L2FwaSI7CmltcG9ydCB7IE5vdGlmeSxUb2FzdCB9IGZyb20gJ3ZhbnQnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICIiLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2RlOiAiIiwgLy8g55So5oi35aeT5ZCNCiAgICAgIHBob25lOiAiIiwgLy8g6IGU57O755S16K+dCiAgICAgIGNvZGVSZXN0VGltZTogMCwKICAgICAgcmVzdFRpbWU6IDYwLAogICAgICBwaG9uZUNvZGU6IFsiIiwgIiJdLCAvL+ato+ehrueahCDmiYvmnLrlj7cg5ZKMIOmqjOivgeeggQogICAgICBwaG9uZVN1YjogIiIsCiAgICAgIGNvZGVTdWI6ICIiCiAgICB9OwogIH0sCiAgYWN0aXZhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgY2hlY2tJc1dlY2hhdEJyb3dzZXIoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSJtaWNyb21lc3NlbmdlciIKICAgICAgKTsKICAgIH0sCiAgICBoaWRlUGFnZU5hdkluV2VjaGF0QnJvd3NlcigpIHsKICAgICAgLy8jaWZkZWYgSDUKICAgICAgaWYgKGNoZWNrSXNXZWNoYXRCcm93c2VyKCkpIHsKICAgICAgICBsZXQgcGFnZU5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ1bmktcGFnZS1oZWFkIik7CiAgICAgICAgaWYgKHBhZ2VOYXYgJiYgcGFnZU5hdlswXSkgewogICAgICAgICAgcGFnZU5hdlswXS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0KICAgICAgfQogICAgICAvLyNlbmRpZgogICAgfSwKICAgIGNoZWNrUGhvbmUocGhvbmUpIHsKICAgICAgdmFyIHBob25lUmVnID0gL14xXGR7MTB9JC87CiAgICAgIGlmIChwaG9uZS5sZW5ndGggIT0gMTEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoIXBob25lUmVnLnRlc3QocGhvbmUpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogICAgYnRuQ2xpY2soKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoaXMucGhvbmUgPT0gIiIpIHsKICAgICAgICBUb2FzdCgn6K+35aGr5YaZ5omL5py65Y+3JykKICAgICAgICAgIC8vIE5vdGlmeSh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAn6K+35aGr5YaZ5omL5py65Y+3J30pOwogICAgICAgIC8vIGFsZXJ0KCLor7floavlhpnmiYvmnLrlj7ciKTsKICAgICAgfSBlbHNlIGlmICghdGhpcy5jaGVja1Bob25lKHRoaXMucGhvbmUpKSB7CiAgICAgICAgVG9hc3QoJ+aJi+acuuWPt+acieivrycpCiAgICAgICAgICAvLyBOb3RpZnkoeyB0eXBlOiAnZGFuZ2VyJywgbWVzc2FnZTogJ+aJi+acuuWPt+acieivryd9KTsKICAgICAgICAvLyBhbGVydCgi5omL5py65Y+35pyJ6K+vIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb2RlUmVzdFRpbWUgPSB0aGlzLnJlc3RUaW1lOwogICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIC0tdGhpcy5jb2RlUmVzdFRpbWU7CiAgICAgICAgICBpZiAoIXRoaXMuY29kZVJlc3RUaW1lKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CgogICAgICAgIGdldFZlcmlmaWNhdGlvbih7CiAgICAgICAgICBwaG9uZTogdGhpcy5waG9uZSwKICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgIHRoYXQucGhvbmVTdWIgPSByZXMuZGF0YS5waG9uZTsKICAgICAgICAgICAgICB0aGF0LmNvZGVTdWIgPSByZXMuZGF0YS5tc2c7CiAgICAgICAgICAgIC8vIHRoYXQucGhvbmVDb2RlWyh0aGF0LnBob25lLCByZXMubXNnKV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBhbGVydCgi6aqM6K+B56CB5Y+R6YCB5aSx6LSlIik7CiAgICAgICAgICAgIFRvYXN0KHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgLy8gTm90aWZ5KHsgdHlwZTogJ3ByaW1hcnknLCBtZXNzYWdlOiAgcmVzLm1zZ30pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY29tbWl0KCkgewogICAgICBpZiAodGhpcy5waG9uZSA9PSAiIikgewogICAgICAgIFRvYXN0KCfor7floavlhpnmiYvmnLrlj7cnKQogICAgICAgICAgLy8gIE5vdGlmeSh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAn6K+35aGr5YaZ5omL5py65Y+3J30pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5jaGVja1Bob25lKHRoaXMucGhvbmUpKSB7CiAgICAgICAgVG9hc3QoJ+aJi+acuuWPt+acieivrycpCiAgICAgICAgICAvLyBOb3RpZnkoeyB0eXBlOiAnZGFuZ2VyJywgbWVzc2FnZTogJ+aJi+acuuWPt+acieivryd9KTsKICAgICAgICByZXR1cm47CiAgICAgIC8vIH0gZWxzZSBpZiAodGhpcy5jb2RlID09ICIiKSB7CiAgICAgIC8vICAgVG9hc3QoJ+ivt+Whq+WGmemqjOivgeeggScpCiAgICAgIC8vICAgICAvLyBOb3RpZnkoeyB0eXBlOiAnZGFuZ2VyJywgbWVzc2FnZTogJ+ivt+Whq+WGmemqjOivgeeggSd9KTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIC8vIH0gZWxzZSBpZiAodGhpcy5waG9uZVN1YiA9PSAiIikgewogICAgICAvLyAgIFRvYXN0KCfor7fojrflj5bpqozor4HnoIEnKQogICAgICAvLyAgIC8vIE5vdGlmeSh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAn6K+36I635Y+W6aqM6K+B56CBJ30pOwogICAgICAvLyAgIHJldHVybjsKICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLnBob25lU3ViICE9IHRoaXMucGhvbmUpIHsKICAgICAgLy8gICBUb2FzdCgn6aqM6K+B56CB6L+H5pyfJykKICAgICAgLy8gICAgIC8vIE5vdGlmeSh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAn6aqM6K+B56CB6L+H5pyfJ30pOwogICAgICAvLyAgIHJldHVybjsKICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLmNvZGVTdWIgIT0gdGhpcy5jb2RlKSB7CiAgICAgIC8vICAgVG9hc3QoJ+mqjOivgeeggemUmeivrycpCiAgICAgIC8vICAgICAvLyBOb3RpZnkoeyB0eXBlOiAnZGFuZ2VyJywgbWVzc2FnZTogJ+mqjOivgeeggemUmeivryd9KTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ2V0TG9naW4oewogICAgICAgICAgcGhvbmU6IHRoaXMucGhvbmUsCiAgICAgICAgICBzdGF0dXM6IDEKICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgIFRvYXN0KHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgLy8gTm90aWZ5KHsgdHlwZTogJ3ByaW1hcnknLCBtZXNzYWdlOiAgcmVzLmRhdGEubXNnfSk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIC8vIHBhdGg6ICIvaW5zdHJ1bWVudExpc3QiLAogICAgICAgICAgICAgICAgcGF0aDogIi9pbnN0cnVtZW50TGlzdCIsCiAgICAgICAgICAgICAgICBxdWVyeTp7aWQ6IDJ8fCByZXMuZGF0YS5yb2xlSWR9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVG9hc3QocmVzLmRhdGEubXNnKQogICAgICAgICAgICAvLyBOb3RpZnkoeyB0eXBlOiAncHJpbWFyeScsIG1lc3NhZ2U6ICByZXMuZGF0YS5tc2d9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUxvZ2luKCkgewogICAgICAvLyB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgIC8vICAgICBwYXRoOiIvaW5zdHJ1bWVudExpc3QiCiAgICAgIC8vIH0pCgogICAgICAvLyAxLS3lupPnrqEgICAyLS3nlJ/kuqcgIDMtLee7tOS/riAgCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2luc3RydW1lbnRMaXN0IiwKICAgICAgICBxdWVyeTp7aWQ6IDEgfHwgcmVzLmRhdGEucm9sZUlkfQogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages/login","sourcesContent":["<template>\n  <div class=\"login-section\">\n    <div class=\"root_header\">\n      <img class=\"icon_logo\" src=\"../../assets/images/icon_logo.png\" alt=\"\" />\n      <div class=\"icon_login_text\">仓库仪器管理系统</div>\n    </div>\n\n    <div class=\"main\">\n      <div class=\"form-item\">\n        <input\n          v-model=\"phone\"\n          type=\"tel\"\n          name=\"phone\"\n          placeholder=\"请输入手机号码\"\n        />\n        <div class=\"get_code\" @click=\"btnClick\">\n          {{ codeRestTime ? `${codeRestTime}S` : \"获取验证码\" }}\n        </div>\n      </div>\n      <div class=\"form-item\" style=\"margin-top: 20px\">\n        <input\n          v-model=\"code\"\n          type=\"number\"\n          name=\"code\"\n          placeholder=\"请输入验证码\"\n          maxlength=\"4\"\n        />\n      </div>\n      <!-- <div class=\"submit_view\" @click=\"commit\">登录</div> -->\n      <van-button class=\"submit_view\" block type=\"info\" @click=\"commit\">登录</van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getVerification, getLogin } from \"../../request/api\";\nimport { Notify,Toast } from 'vant';\n\nexport default {\n  name: \"\",\n  components: {},\n  data() {\n    return {\n      code: \"\", // 用户姓名\n      phone: \"\", // 联系电话\n      codeRestTime: 0,\n      restTime: 60,\n      phoneCode: [\"\", \"\"], //正确的 手机号 和 验证码\n      phoneSub: \"\",\n      codeSub: \"\"\n    };\n  },\n  activated() {},\n  methods: {\n    checkIsWechatBrowser() {\n      return (\n        navigator.userAgent.toLowerCase().match(/MicroMessenger/i) ==\"micromessenger\"\n      );\n    },\n    hidePageNavInWechatBrowser() {\n      //#ifdef H5\n      if (checkIsWechatBrowser()) {\n        let pageNav = document.getElementsByTagName(\"uni-page-head\");\n        if (pageNav && pageNav[0]) {\n          pageNav[0].style.display = \"none\";\n        }\n      }\n      //#endif\n    },\n    checkPhone(phone) {\n      var phoneReg = /^1\\d{10}$/;\n      if (phone.length != 11) {\n        return false;\n      } else if (!phoneReg.test(phone)) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    btnClick() {\n      let that = this;\n      if (this.phone == \"\") {\n        Toast('请填写手机号')\n          // Notify({ type: 'danger', message: '请填写手机号'});\n        // alert(\"请填写手机号\");\n      } else if (!this.checkPhone(this.phone)) {\n        Toast('手机号有误')\n          // Notify({ type: 'danger', message: '手机号有误'});\n        // alert(\"手机号有误\");\n      } else {\n        this.codeRestTime = this.restTime;\n        let timer = setInterval(() => {\n          --this.codeRestTime;\n          if (!this.codeRestTime) {\n            clearInterval(timer);\n            timer = null;\n          }\n        }, 1000);\n\n        getVerification({\n          phone: this.phone,\n        }).then((res) => {\n          if (res.data.success) {\n              console.log(res.data.msg)\n              that.phoneSub = res.data.phone;\n              that.codeSub = res.data.msg;\n            // that.phoneCode[(that.phone, res.msg)];\n          } else {\n            // alert(\"验证码发送失败\");\n            Toast(res.data.msg)\n            // Notify({ type: 'primary', message:  res.msg});\n          }\n        });\n      }\n    },\n    commit() {\n      if (this.phone == \"\") {\n        Toast('请填写手机号')\n          //  Notify({ type: 'danger', message: '请填写手机号'});\n        return;\n      } else if (!this.checkPhone(this.phone)) {\n        Toast('手机号有误')\n          // Notify({ type: 'danger', message: '手机号有误'});\n        return;\n      // } else if (this.code == \"\") {\n      //   Toast('请填写验证码')\n      //     // Notify({ type: 'danger', message: '请填写验证码'});\n      //   return;\n      // } else if (this.phoneSub == \"\") {\n      //   Toast('请获取验证码')\n      //   // Notify({ type: 'danger', message: '请获取验证码'});\n      //   return;\n      // } else if (this.phoneSub != this.phone) {\n      //   Toast('验证码过期')\n      //     // Notify({ type: 'danger', message: '验证码过期'});\n      //   return;\n      // } else if (this.codeSub != this.code) {\n      //   Toast('验证码错误')\n      //     // Notify({ type: 'danger', message: '验证码错误'});\n      //   return;\n      } else {\n        getLogin({\n          phone: this.phone,\n          status: 1\n        }).then((res) => {\n          console.log(res)\n          if (res.data.success) {\n            Toast(res.data.msg)\n            // Notify({ type: 'primary', message:  res.data.msg});\n            this.$router.push({\n                // path: \"/instrumentList\",\n                path: \"/instrumentList\",\n                query:{id: 2|| res.data.roleId}\n            });\n          } else {\n            Toast(res.data.msg)\n            // Notify({ type: 'primary', message:  res.data.msg});\n          }\n        });\n      }\n    },\n    handleLogin() {\n      // this.$router.replace({\n      //     path:\"/instrumentList\"\n      // })\n\n      // 1--库管   2--生产  3--维修  \n      this.$router.push({\n        path: \"/instrumentList\",\n        query:{id: 1 || res.data.roleId}\n      });\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n@import \"../../assets/style/variable.scss\";\n.login-section {\n  height: 100%;\n  flex-direction: column;\n  @include flexCenter;\n  .submit-btn {\n    width: 500px;\n  }\n  .root_header {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    // padding-top: 200px;\n  }\n\n  .icon_logo {\n    width: 172px;\n    height: 146px;\n  }\n\n  .icon_login_text {\n    font-size: 48px;\n    font-family: PingFangSC-Semibold, PingFang SC;\n    font-weight: 600;\n    color: #333333;\n    line-height: 33px;\n    margin-top: 60px;\n  }\n\n  .main {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding-top: 50px;\n  }\n  .form-item {\n    display: flex;\n    height: 100px;\n    position: relative;\n    align-items: center;\n\n    input {\n      height: 100px;\n      border: none;\n      outline: none;\n      width: 600px;\n      border-bottom: 1px solid #dddddd;\n      font-size: 36px;\n      font-family: PingFangSC-Regular, PingFang SC;\n      font-weight: 400;\n      color: #999999;\n    //   padding: 0px 50px;\n    }\n  }\n\n  .submit_view {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 60px;\n    width: 500px;\n    background: #307ff5;\n    border-radius: 6px;\n    color: #ffffff;\n    font-size: 44px;\n  }\n\n  .get_code {\n    position: absolute;\n    right: 25px;\n    font-size: 36px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: #307ff5;\n    line-height: 25px;\n  }\n}\n</style>"]}]}